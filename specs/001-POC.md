# SPEC-001 POC: Budget Zero Validation Plan

**Collegamento**: Questo documento collega il POC (`../poc/`) con le specifiche complete (SPEC-001, PLAN-001, TASKS-001).

**Created**: 2025-10-23
**Status**: 🔄 IN PROGRESS

---

## 🎯 Obiettivo POC

Prima di investire 320-380 ore nell'implementazione completa, validare con **20 ore di POC budget-zero** le 4 assunzioni tecniche più rischiose.

---

## 📊 Mapping POC → Spec

### POC-1: IfcOpenShell → Valida SPEC-001 Requirements

| POC-1 Validation | SPEC-001 Reference | Risk if Fails |
|------------------|-------------------|---------------|
| Coordinate extraction | FR-004, FR-005 | 🔴 CRITICAL - Core feature |
| IFC4 parsing | FR-003 | 🔴 CRITICAL - No alternative |
| Performance <5s | NFR-014 | 🟡 MEDIUM - Can adjust threshold |
| Windows compatibility | PLAN-001 Setup | 🔴 CRITICAL - Target platform |

**Decision Impact**:
- ✅ PASS → Continue as planned
- ❌ FAIL → PIVOT to IFC.js (Constitution §2.2 change required)

---

### POC-2: CesiumJS + web-ifc → Valida SPEC-001 Frontend

| POC-2 Validation | SPEC-001 Reference | Risk if Fails |
|------------------|-------------------|---------------|
| 3D geometry rendering | FR-012, FR-013, FR-014 | 🔴 CRITICAL - Core UX |
| FPS ≥30 | NFR-002 (target 60fps) | 🟡 MEDIUM - Can reduce to 30 |
| web-ifc in Web Worker | NFR-003 | 🔴 CRITICAL - UI blocking |
| Cesium globe init | FR-010 | 🟡 MEDIUM - Can use alternative |

**Decision Impact**:
- ✅ PASS → Continue with web-ifc + CesiumJS
- ⚠️ PARTIAL → Reduce FPS requirement to 30 (update NFR-002)
- ❌ FAIL → PIVOT to Three.js standalone or Babylon.js

---

### POC-3: File Upload → Valida SPEC-001 Backend

| POC-3 Validation | SPEC-001 Reference | Risk if Fails |
|------------------|-------------------|---------------|
| 50MB upload stable | FR-002 (100MB limit) | 🟢 LOW - Can reduce limit |
| No memory leak | NFR-003 | 🟡 MEDIUM - Needs investigation |
| Progress tracking | FR-015 | 🟢 LOW - Nice-to-have |

**Decision Impact**:
- ✅ PASS → Keep 100MB limit
- ⚠️ PARTIAL → Reduce to 50MB or 20MB (update FR-002)
- ❌ FAIL → Implement chunked upload (add tasks)

---

### POC-4: PostGIS → Valida SPEC-001 Database

| POC-4 Validation | SPEC-001 Reference | Risk if Fails |
|------------------|-------------------|---------------|
| Spatial query <100ms | NFR-005 | 🟡 MEDIUM - Can adjust threshold |
| GiST index works | FR-009 | 🟢 LOW - Standard feature |
| Docker setup smooth | PLAN-001 Infrastructure | 🟢 LOW - Alternative: managed DB |

**Decision Impact**:
- ✅ PASS → Use PostgreSQL + PostGIS
- ⚠️ PARTIAL → Adjust query performance targets
- ❌ FAIL → PIVOT to SQLite + SpatiaLite (simpler)

---

## 🔄 POC → Spec Update Workflow

### Step 1: Complete POC (../poc/)
Run all 4 POC validation tests, document results in `RESULTS.md` files.

### Step 2: Compile POC-SUMMARY.md
Aggregate findings and make GO/NO-GO/PIVOT decision.

### Step 3: Update Specifications (if needed)

#### If Minor Changes (⚠️ PARTIAL results):
```bash
# Update SPEC-001
# - Adjust NFR thresholds (es: FPS 30 instead of 60)
# - Add edge cases discovered
# Location: specs/001-ifc-upload-visualization.md

# Update PLAN-001
# - Add ADRs for POC learnings
# - Document installation quirks
# Location: specs/001-plan.md

# Update TASKS-001
# - Add mitigation tasks
# - Adjust time estimates based on POC
# Location: specs/001-tasks.md
```

#### If Major Changes (🔄 PIVOT required):
```bash
# Update Constitution
# - Change §2.2 Technology Stack
# Location: CONSTITUTION.md

# Regenerate SPEC-001 & PLAN-001
# - Use new architecture from POC findings
# - Re-run /speckit.specify with new constraints

# Regenerate TASKS-001
# - Completely new task breakdown
```

---

## 📋 POC Completion Checklist

Before marking POC complete:

- [ ] All 4 POC RESULTS.md compiled
- [ ] POC-SUMMARY.md decisione presa (GO/PIVOT/NO-GO)
- [ ] Se GO: learnings applicati alle spec (commit changes)
- [ ] Se PIVOT: Constitution aggiornata, spec rigenerate
- [ ] Se NO-GO: documentato "why" per future reference

---

## 🎯 Success Metrics

| Metric | Target | How to Measure |
|--------|--------|----------------|
| Time investment | ≤20 hours | Sum of all POC time |
| Spec accuracy | ≥80% | % of spec that doesn't need changes |
| Confidence increase | +30% | Self-assessment before/after |
| Blockers identified | ≥3 | Count of issues found early |

---

## 🔗 Related Documents

- **POC Folder**: `../poc/README.md` (start here)
- **Quick Start**: `../poc/QUICK-START.md` (5-min guide)
- **Constitution**: `../CONSTITUTION.md` (immutable principles)
- **Feature Spec**: `001-ifc-upload-visualization.md` (what to build)
- **Implementation Plan**: `001-plan.md` (how to build)
- **Task Breakdown**: `001-tasks.md` (118 tasks)

---

## 📝 Version History

| Version | Date | Changes | Author |
|---------|------|---------|--------|
| 0.1 | 2025-10-23 | POC plan created, budget-zero approach | @claude |
| 0.2 | [PENDING] | POC completed, results integrated | [TU] |

---

**Status**: ⏳ Awaiting POC execution
**Next Action**: `cd ../poc && cat QUICK-START.md`
